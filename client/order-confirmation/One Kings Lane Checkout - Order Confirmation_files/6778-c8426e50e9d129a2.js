"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6778],{66778:function(a,b,c){c.r(b),c.d(b,{gaProducts:function(){return w},getBrandName:function(){return v},productGA:function(){return y},sendEventToGA:function(){return x}});var d,e,f,g,h=c(47568),i=c(14924),j=c(828),k=c(29815),l=c(34051),m=c.n(l),n=c(27429),o=c(48080),p=c(40136),q=c(59126),r=c(23406),s=c(9412),t=function(a,b){var c,d=a.salePrice;if(null==a?void 0:null===(c=a.discounts)|| void 0===c?void 0:c.length){var e=b?a.couponAmount:a.discounts[0].discountedAmount;d=parseFloat((a.salePrice-e/a.quantity).toFixed(2))}return d},u=function(a,b){return b.path.split("/").length-a.path.split("/").length||b.name.length-a.name.length},v=(d=(0,h.Z)(m().mark(function a(b){var d,e,f,g,h;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=null==b?void 0:b.filter(function(a){var b=a.sku;return!!b&&!(0,p.checkIsExtendItem)({sku:b})&&!(0,r.default)({sku:b})}).map(function(a){return a.sku}),a.t0=j.Z,a.next=4,(0,o.Z)(function(){return[Promise.all([c.e(1704),c.e(8043)]).then(c.bind(c,81704))]});case 4:return a.t1=a.sent,f=(e=(0,a.t0)(a.t1,1))[0].Product,a.next=9,f.bySkus(null!=d?d:[]);case 9:return g=a.sent,h={},g.forEach(function(a){h[a.id]=a,h[a.sku]=a,a.variants.forEach(function(b){h[b.sku]=a})}),a.abrupt("return",function(a){var b;return(null==h?void 0:null===(b=h[a])|| void 0===b?void 0:b.brand)||""});case 13:case"end":return a.stop()}},a)})),function(a){return d.apply(this,arguments)}),w=(e=(0,h.Z)(m().mark(function a(b){var c,d,e,f,g,h,i=arguments;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=i.length>1&& void 0!==i[1]&&i[1],d={},e=function(a){var b,c,e;return null===(c=(0,k.Z)((null===(b=d[a])|| void 0===b?void 0:b.category_info)||[]).sort(u))|| void 0===c?void 0:null===(e=c[0])|| void 0===e?void 0:e.name},a.next=5,v(b);case 5:return f=a.sent,g=b?b.filter(function(a){var b=a.sku;return!!b&&!(0,p.checkIsExtendItem)({sku:b})&&!(0,r.default)({sku:b})}).map(function(a){return a.sku}):[],a.next=9,(0,s.Jh)(g);case 9:return h=a.sent,a.abrupt("return",null==b?void 0:b.map(function(a){var b,d;return{name:a.name,id:a.sku,salePrice:a.salePrice,price:t(a,c),brand:f(null==a?void 0:a.sku),category:(null==a?void 0:a.productId)?e(null==a?void 0:a.sku):"",variant:a.variantId,quantity:a.quantity,totalReviews:(null==a?void 0:a.sku)&&(null===(b=h[null==a?void 0:a.sku])|| void 0===b?void 0:b.reviews),averageRating:(null==a?void 0:a.sku)&&(null===(d=h[null==a?void 0:a.sku])|| void 0===d?void 0:d.averageRating)}}));case 11:case"end":return a.stop()}},a)})),function(a){return e.apply(this,arguments)}),x=(f=(0,h.Z)(m().mark(function a(b,d,e,f,g,i){var k;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(k=function(){var a=(0,h.Z)(m().mark(function a(){var h,k,l,p,q,r,s;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=j.Z,a.next=3,(0,o.Z)(function(){return[Promise.resolve().then(c.bind(c,32054)),]});case 3:if(a.t1=a.sent,k=(h=(0,a.t0)(a.t1,1))[0].getCustomerDetails,(0,n.cM)("sending GA event",f),a.prev=7,q=null==(p=k())?void 0:p.customerId,r=null==p?void 0:p.customerEmail,s=r?"Logged In":"Guest",!(null===(l=window.dataLayer)|| void 0===l)){a.next=17;break}a.next=33;break;case 17:return a.t2=l,a.t3=f,a.t4={couponCode:d},a.next=22,w(b);case 22:a.t5=a.sent,a.t6=g,a.t7={actionField:a.t4,products:a.t5,total:a.t6},a.t8={currencyCode:"USD",checkout:a.t7},a.t9=r,a.t10=s,a.t11=q,a.t12=e,a.t13=i,a.t14={event:a.t3,ecommerce:a.t8,customerEmail:a.t9,visitorType:a.t10,customerId:a.t11,pageName:a.t12,paymentMethod:a.t13},a.t2.push.call(a.t2,a.t14);case 33:a.next=38;break;case 35:a.prev=35,a.t15=a.catch(7),console.error(a.t15);case 38:case"end":return a.stop()}},a,null,[[7,35]])}));return function(){return a.apply(this,arguments)}}(),!window.loadedAndInteractive){a.next=6;break}return a.next=4,k();case 4:a.next=7;break;case 6:window.addEventListener("loadedAndInteractive",k,{once:!0});case 7:case"end":return a.stop()}},a)})),function(a,b,c,d,e,g){return f.apply(this,arguments)}),y=(g=(0,h.Z)(m().mark(function a(b){var c,d,e,f,g,h,j,k,l,o,p,r,t,u,v,w,x,y;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=b.name,d=b.sku,e=b.price,f=b.salePrice,g=b.variantId,h=b.categories,j=b.event,k=b.brand,l=b.quantity,o=b.customerId,p=void 0===o?0:o,r=b.customerEmail,t=void 0===r?"":r,u=b.cartTotal,v=0,w=0,!d){a.next=8;break}return a.next=6,(0,s.mr)([d]);case 6:(x=a.sent[0])&&(v=x.reviews,w=x.averageRating);case 8:y=function(){try{(0,n.cM)("productGA recording",{name:c,sku:d,price:e,salePrice:f,variantId:g,categories:h,event:j,brand:k,quantity:l,customerId:p,customerEmail:t,cartTotal:u});var a,b,m="addToCart"===j?"add":"detail",o={event:j,ecommerce:(0,i.Z)({currencyCode:"USD"},m,{products:[{name:c,id:d,price:e,salePrice:f,brand:k,variant:g,category:(0,q.getCategoryName)(h),totalReviews:v,averageRating:w,inventoryCount:"In Stock",quantity:"".concat(void 0!==l?l:"")}]}),cartTotal:u,customerId:p,customerEmail:t,visitorType:t?"Logged In":"Guest",pageName:"pdp"};null==window||null===(a=window.dataLayer)|| void 0===a||a.push({ecommerce:null}),null==window||null===(b=window.dataLayer)|| void 0===b||b.push(o)}catch(r){(0,n.vU)("productGA Failed ".concat(String(r)))}},window.loadedAndInteractive?y():window.addEventListener("loadedAndInteractive",y,{once:!0});case 10:case"end":return a.stop()}},a)})),function(a){return g.apply(this,arguments)})},59126:function(a,b,c){c.r(b),c.d(b,{getCategoryName:function(){return e}});var d=c(29815),e=function(a){var b;return(null===(b=(0,d.Z)(a).sort(function(a,b){return b.path.split("/").length-a.path.split("/").length||b.name.length-a.name.length})[0])|| void 0===b?void 0:b.name)||""};b.default=e},9412:function(a,b,c){c.d(b,{Jh:function(){return p},"_R":function(){return o},mr:function(){return n}});var d,e,f,g=c(47568),h=c(14924),i=c(26042),j=c(69396),k=c(34051),l=c.n(k),m=c(16977),n=(d=(0,g.Z)(l().mark(function a(b){var c;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("".concat(m.SEARCH_API,"/product-review?skus=").concat(null==b?void 0:b.join(",")));case 3:return c=a.sent,a.next=6,c.json();case 6:return a.abrupt("return",a.sent);case 9:return a.prev=9,a.t0=a.catch(0),a.abrupt("return",[]);case 12:case"end":return a.stop()}},a,null,[[0,9]])})),function(a){return d.apply(this,arguments)}),o=(e=(0,g.Z)(l().mark(function a(b){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!b){a.next=2;break}return a.abrupt("return",n([b]).then(function(a){return null==a?void 0:a[0]}));case 2:return a.abrupt("return",void 0);case 3:case"end":return a.stop()}},a)})),function(a){return e.apply(this,arguments)}),p=(f=(0,g.Z)(l().mark(function a(b){var c,d;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==b.length){a.next=2;break}return a.abrupt("return",{});case 2:c=[],d=0;case 4:if(!(d<b.length)){a.next=13;break}return a.t0=c,a.next=8,n(b.slice(d,d+25));case 8:a.t1=a.sent,a.t0.push.call(a.t0,a.t1);case 10:d+=25,a.next=4;break;case 13:return a.abrupt("return",c.reduce(function(a,b){return(0,i.Z)({},a,b.reduce(function(a,b){return(0,j.Z)((0,i.Z)({},a),(0,h.Z)({},b.sku,b))},{}))},{}));case 14:case"end":return a.stop()}},a)})),function(a){return f.apply(this,arguments)})}}])
//# sourceMappingURL=6778-c8426e50e9d129a2.js.map