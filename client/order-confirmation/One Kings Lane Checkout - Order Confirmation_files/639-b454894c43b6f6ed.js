"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639,3464,7669,770],{93464:function(a,b,c){c.r(b),c.d(b,{acronymToName:function(){return e},mapStateToAcronym:function(){return h},mapStateToFullName:function(){return i},nameToAcronym:function(){return f}});var d=function(a){return"".concat(a).trim().toLowerCase().split(" ").map(function(a,b,c){var d;return b+1>=c.length||0===b?"string"==typeof(d=a)&&d.trim().length>0?"".concat(d.trim()[0].toUpperCase()).concat(String(d.trim().slice(1)||"").toLowerCase()):"":String(a||"").toLowerCase()}).join(" ")},e={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District of Columbia",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},f={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE","District of Columbia":"DC",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"},g=function(a){return!!e[a]},h=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:"",b="".concat(a).toUpperCase().trim();return(g(b)?b:f[d(a)])||""},i=function(){var a,b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:"",c=f[d(b)]||"",h=e[c]||"";return(g(c)&&f[a=h]?h:e["".concat(b).toUpperCase()])||""}},50770:function(a,b,c){c.r(b),c.d(b,{addGooglePlacesAPI:function(){return f}});var d=c(16977),e=c(29901),f=function(){return new Promise(function(a,b){if((0,e.r)())a(!0);else{var c=document.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=".concat(d.PLACES_KEY,"&libraries=places"));var f=function(){(0,e.r)()?(c.removeEventListener("load",f),a(!0)):b(Error("Failed to verify places API"))};c.addEventListener("load",f),document.head.appendChild(c),setTimeout(function(){return b(Error("TIMEOUT more than 3.5s trying to load the script  This should load in less than 300ms"))},350)}})};b.default=f},57669:function(a,b,c){c.r(b),c.d(b,{getAddressObjectFromDescription:function(){return q},getAddressObjectFromPlacesAPI:function(){return n}});var d,e,f=c(47568),g=c(828),h=c(34051),i=c.n(h),j=c(48080),k=c(93464),l=c(16977),m=c(27429),n=function(a){var b=a.address_components,c=function(a){var c,d=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"long_name";return(null===(c=b.find(function(b){return b.types.includes(a)}))|| void 0===c?void 0:c[d])||""},d=c("street_number"),e=c("route"),f="".concat(d," ").concat(e),g=c("subpremise"),h=c("postal_code"),i=c("administrative_area_level_1","short_name"),j=c("sublocality_level_1"),l=c("locality")||j;if(!(e&&d&&l&&i&&h))return null;var n={street1:f,street2:g,city:l,company:c("country")||"US",countryCode:"US",stateAcronym:(0,k.mapStateToAcronym)(i),stateName:(0,k.mapStateToFullName)(i),zip:h,country:c("establishment"),customFields:[],email:"",firstName:"",lastName:"",phone:"",addressType:"residential",shouldSaveAddress:!1};return(0,m.cM)("getAddressObjectFromPlacesAPI",{address:n}),n},o=function(a){var b=a.types;return"ROOFTOP"===a.geometry.location_type||b.includes("street_address")||b.includes("premise")||b.includes("subpremise")},p=(d=(0,f.Z)(i().mark(function a(b){var d,e,f,h,k;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=g.Z,a.next=3,(0,j.Z)(function(){return[Promise.resolve().then(c.t.bind(c,9669,23))]});case 3:return a.t1=a.sent,f=(e=(d=(0,a.t0)(a.t1,1))[0]).default,a.next=9,f.get("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(b,"&key=").concat(l.PLACES_KEY));case 9:return k=(h=a.sent).data.results,a.abrupt("return",k);case 12:case"end":return a.stop()}},a)})),function(a){return d.apply(this,arguments)}),q=(e=(0,f.Z)(i().mark(function a(b){var d,e,f,h,j;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=b.description,(0,m.cM)("getAddressObjectFromDescription START",{description:d}),a.prev=2,a.t0=g.Z,a.next=6,Promise.all([c.e(3830).then(c.bind(c,93830))]);case 6:return a.t1=a.sent,f=(e=(0,a.t0)(a.t1,1))[0].addressHasRequiredFields,a.next=11,p(d);case 11:return j=(h=a.sent).filter(o).map(n).filter(function(a){return!!a&&f(a)}),(0,m.cM)("getAddressObjectFromDescription END",{description:d,addresses:j}),a.abrupt("return",j);case 17:return a.prev=17,a.t2=a.catch(2),(0,m.vU)("getAddressObjectFromDescription FAILED",a.t2),a.abrupt("return",[]);case 21:case"end":return a.stop()}},a,null,[[2,17]])})),function(a){return e.apply(this,arguments)})},803:function(a,b,c){c.r(b),c.d(b,{getAddresses:function(){return l}});var d,e=c(47568),f=c(828),g=c(29815),h=c(34051),i=c.n(h),j=c(48080),k=c(16977),l=(d=(0,e.Z)(i().mark(function a(b){var d,e,h,l,m,n,o,p;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=b.email,a.t0=f.Z,a.next=4,(0,j.Z)(function(){return[Promise.resolve().then(c.t.bind(c,9669,23)),c.e(3168).then(c.bind(c,83168)),c.e(3830).then(c.bind(c,93830)),c.e(606).then(c.bind(c,80606)),]});case 4:return a.t1=a.sent,l=(h=(e=(0,a.t0)(a.t1,4))[0]).default,m=e[1].standardizeAddress,n=e[2].isValidAddress,o=e[3].assertOAUTHCustomerAddressesRequest,a.t2=o,a.next=14,l.get("".concat(k.OAUTH_API,"/sf/customer/addresses/").concat(d));case 14:return a.t3=a.sent.data,p=(0,a.t2)(a.t3).data,a.abrupt("return",(0,g.Z)(p).map(m).filter(n));case 17:case"end":return a.stop()}},a)})),function(a){return d.apply(this,arguments)});b.default=l},60639:function(a,b,c){c.r(b),c.d(b,{addGooglePlacesAPI:function(){return l.addGooglePlacesAPI},createAddress:function(){return x},deleteAddress:function(){return s},editAddress:function(){return y},getAddressObjectFromDescription:function(){return j.getAddressObjectFromDescription},getAddresses:function(){return i.getAddresses},getNonShippedStates:function(){return w},getPlacesKey:function(){return u},getPlacesPredictions:function(){return k.getPlacesPredictions},getShipments:function(){return z},placesAPIPresent:function(){return h.r},saveAddressToUser:function(){return t}});var d,e,f=c(29815),g=c(16977),h=c(29901),i=c(803),j=c(57669),k=c(93852),l=c(50770),m=c(47568),n=c(828),o=c(34051),p=c.n(o),q=c(48080),r=c(27429),s=(d=(0,m.Z)(p().mark(function a(b){var d,e,f,h,i,j,k,l,m,o;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=b.data,e=b.email,a.prev=1,(0,r.cM)("deleteAddress START",{data:d,email:e}),a.t0=n.Z,a.next=6,(0,q.Z)(function(){return[Promise.resolve().then(c.t.bind(c,9669,23)),Promise.resolve().then(c.bind(c,803)),c.e(606).then(c.bind(c,80606)),]});case 6:return a.t1=a.sent,i=(h=(f=(0,a.t0)(a.t1,3))[0]).default,j=f[1].getAddresses,k=f[2].assertOAUTHCustomerAddressDeletionRequest,a.next=14,i.delete("".concat(g.OAUTH_API,"/sf/customer/address/"),{data:{customer_id:parseInt("".concat(d.customer_id)),id:parseInt("".concat(d.id))}});case 14:return m=k((l=a.sent).data),a.next=18,j({email:e});case 18:if(o=a.sent,!(null==m?void 0:m.success)){a.next=22;break}return(0,r.cM)("deleteAddress END",{success:!0,savedAddresses:o}),a.abrupt("return",{success:!0,savedAddresses:o});case 22:return(0,r.vU)("Error occurred in deleteAddress function:",null==m?void 0:m.message),a.abrupt("return",{success:!1,savedAddresses:o});case 26:return a.prev=26,a.t2=a.catch(1),(0,r.vU)("Error occurred in deleteAddress function:",a.t2),a.abrupt("return",{success:!1,savedAddresses:[]});case 30:case"end":return a.stop()}},a,null,[[1,26]])})),function(a){return d.apply(this,arguments)}),t=(e=(0,m.Z)(p().mark(function a(b){var d,e,f,h,i,j,k,l,m,o,s;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=b.address,e=b.email,a.prev=1,(0,r.cM)("saveAddressToUser START",{address:d,email:e}),a.t0=n.Z,a.next=7,(0,q.Z)(function(){return[Promise.resolve().then(c.t.bind(c,9669,23)),Promise.resolve().then(c.bind(c,803)),Promise.resolve().then(c.bind(c,93464)),]});case 7:return a.t1=a.sent,j=(i=(h=(0,a.t0)(a.t1,3))[0]).default,k=h[1].getAddresses,l=h[2].mapStateToFullName,m=l(d.stateAcronym),a.next=16,j.post("".concat(g.OAUTH_API,"/sf/customer/address/"),{first_name:d.firstName,last_name:d.lastName,state_or_province:m,postal_code:d.zip,address1:d.street1,address2:d.street2,customer_id:d.customer_id,city:d.city,stateAcronym:d.stateAcronym,phone:d.phone,company:d.company||"",country_code:d.country_code||"US"});case 16:return a.next=18,k({email:e});case 18:return s=null===(f=(o=a.sent).find(function(a){return a.firstName===d.firstName&&a.lastName===d.lastName&&a.street1===d.street1&&a.street2===d.street2&&a.city===d.city&&a.stateName===m&&a.zip===d.zip&&a.phone===d.phone}))|| void 0===f?void 0:f.id,(0,r.cM)("saveAddressToUser END",{address:d,email:e}),a.abrupt("return",{success:!0,savedAddresses:o,newAddressId:s});case 24:return a.prev=24,a.t2=a.catch(1),(0,r.vU)("saveAddressToUser FAILED",a.t2),a.abrupt("return",{success:!1});case 28:case"end":return a.stop()}},a,null,[[1,24]])})),function(a){return e.apply(this,arguments)}),u=function(){return{placesKey:g.PLACES_KEY}},v=["AS","GU","MP","PR","VI"],w=function(){return(0,f.Z)(v)},x=function(){return"ok"},y=function(){return"ok"},z=function(){return"ok"}},29901:function(a,b,c){c.d(b,{r:function(){return d}});var d=function(){var a,b,c;return!!(null==window?void 0:null===(a=window.google)|| void 0===a?void 0:null===(b=a.maps)|| void 0===b?void 0:null===(c=b.places)|| void 0===c?void 0:c.AutocompleteService)}}}])
//# sourceMappingURL=639-b454894c43b6f6ed.js.map