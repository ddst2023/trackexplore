(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{1498:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout-frame/[identifier]/confirmation/[orderId]",function(){return c(8298)}])},8298:function(a,b,c){"use strict";c.r(b);var d=c(7568),e=c(9815),f=c(4051),g=c.n(f),h=c(5893),i=c(3807),j=c(7294),k=c(1570),l=c(7110),m=c(6977),n=c(731),o=c(1753),p=c(580),q=function(){var a,b,c,f,q,r,s=(0,j.useState)(!1),t=s[0],u=s[1],v=(0,j.useState)(null),w=v[0],x=v[1],y=(0,j.useState)(null),z=y[0],A=y[1],B=(0,j.useState)(null),C=(B[0],B[1]),D=(0,j.useState)(!1),E=D[0],F=D[1],G=(0,j.useState)({brandName:"",themeName:"",logoUrl:""}),H=G[0],I=G[1],J=(0,i.Z)(),K=(0,j.useState)(null),L=K[0],M=K[1],N=(0,j.useState)(null),O=N[0],P=N[1];(0,j.useEffect)(function(){if(window&&window.screen){var a,b;p.v("Screen",{height:window.innerHeight,width:window.innerWidth,orientation:null==window?void 0:null===(a=window.screen)|| void 0===a?void 0:null===(b=a.orientation)|| void 0===b?void 0:b.type})}},[null==window?void 0:window.screen,null==window?void 0:window.innerHeight,null==window?void 0:window.innerWidth,]);var Q=function(a){var b=a.user,c=a.orderId,d=a.lineItems,e=a.subtotal,f=a.shippingCost,g=a.taxTotal,h=a.grandTotal,i=0,j=setInterval(function(){i>10&&clearInterval(j),i++;try{var a=(null==window?void 0:window._ltk)||(null==window?void 0:window.ltk)||(null==window?void 0:window.listrak);if(a&&c&&b){clearInterval(j),a.Order.SetCustomer(b.email,b.firstName,b.lastName),a.Order.OrderNumber=c,a.Order.ItemTotal=e,a.Order.ShippingTotal=f,a.Order.TaxTotal=g,a.Order.OrderTotal=h;for(var k=0;k<d.length;k++){var l=d[k];a.Order.AddItem(l.sku,l.quantity,l.salePrice)}console.log(a.Order),a.Order.Submit()}}catch(m){console.log(m)}},1e3)};(0,j.useEffect)(function(){C(window.parent)},[C]),(0,j.useEffect)(function(){var a,b=(a=(0,d.Z)(g().mark(function a(){return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,J.services.setPageTitle("Checkout - Order Confirmation");case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)});J&&b()},[J]),(0,j.useEffect)(function(){var a,b=(a=(0,d.Z)(g().mark(function a(){var b,c,d,e,f,h,i;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,J.services.initializeOrderConfirmation();case 2:c=(b=a.sent).success,d=b.order,e=b.customer,f=b.branding,h=b.savedInstruments,i=b.offer,c&&d&&A(d),c&&f&&I(f),c&&e&&x(e),P(h),M(i),u(!0);case 15:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)});J&&!t&&b()},[J,A,x,u,t]),(0,j.useEffect)(function(){if(null==H?void 0:H.listrak){var a=document.createElement("script");a.setAttribute("type","text/javascript");var b="https://cdn.listrakbi.com/scripts/script.js?m=".concat(H.listrak,"&v=1");a.setAttribute("id","ltkSDK"),a.setAttribute("src",b),document.head.appendChild(a)}},[H]),(0,j.useEffect)(function(){if(t&&J&&"function"==typeof(null==window?void 0:window.hj)){var a,b=null==z?void 0:null===(a=z.billingAddress)|| void 0===a?void 0:a.customFields,c=b&&b.find(function(a){return a.fieldId===m.CHECKOUT_VERSION_FIELD&&"1"===a.fieldValue});window.hj("identify",null,{checkoutVersion:c?"v2":"v1"})}},[J,t]),(0,j.useEffect)(function(){var a;(a=(0,d.Z)(g().mark(function a(){var b,c;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,null==J?void 0:null===(b=J.services)|| void 0===b?void 0:b.isCustomerInLoyaltyProgram();case 3:F(c=a.sent);case 5:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()},[J]);var R=(0,j.useCallback)(function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return(a=J.services).gaCustomer.apply(a,(0,e.Z)(c))},[J]),S=(0,j.useCallback)(function(){for(var a=arguments.length,c=Array(a),d=0;d<a;d++)c[d]=arguments[d];return(b=J.services).heapCustomer.apply(b,(0,e.Z)(c))},[J]),T=(0,j.useCallback)(function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];return(c=J.services).bounceXPixelTracking.apply(c,(0,e.Z)(b))},[J]),U=(0,j.useCallback)(function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(f=J.services).invespOrderTracking.apply(f,(0,e.Z)(b))},[J]),V=(0,j.useCallback)(function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(q=J.services).gaTrackFields.apply(q,(0,e.Z)(b))},[J]),W=(0,j.useCallback)(function(){return J.services.goToHome()},[J]),X=(0,j.useCallback)(function(){return J.services.getPageUrl()},[J]),Y=(0,j.useCallback)(function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(r=J.services).heapOrderTracking.apply(r,(0,e.Z)(b))},[J]);return(0,j.useEffect)(function(){window.onerror=(0,d.Z)(g().mark(function a(){return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=V,a.next=3,X();case 3:a.t1=a.sent,a.t2={eventCategory:"checkout errors",eventAction:"Unexpected Errors",eventLabel:a.t1},(0,a.t0)(a.t2);case 6:case"end":return a.stop()}},a)}))}),z?(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(l.Z,{value:{checkout:J,branding:H},children:(0,h.jsxs)(o.Q2,{themeId:H.themeName||"okl",children:[(0,h.jsx)("link",{rel:"stylesheet",href:"https://use.typekit.net/oeh4dxv.css"}),(0,h.jsx)(k.MA,{branding:H,order:z,signedIn:!!w,orderComplete:!0,goToHome:W}),(0,h.jsx)(k.NO,{order:z,customer:w,gaCustomer:R,heapCustomer:S,listrakOrderTracking:Q,heapOrderTracking:Y,bounceXPixelTracking:T,invespOrderTracking:U,goToHome:W,branding:H,isCustomerInLoyaltyProgram:E,offer:L,savedInstruments:O})]})})}):(0,h.jsx)(n.Z,{open:!0,currentStep:1,totalSteps:3,message:"Retrieving your order",variant:"light",hasLogo:!1})};b.default=q}},function(a){a.O(0,[477,781,800,922,500,774,888,179],function(){var b;return a(a.s=1498)}),_N_E=a.O()}])
//# sourceMappingURL=[orderId]-73abad7266757e24.js.map